version: '3.8'

services:
  wedding-site:
    build: ./site
    container_name: wedding-site
    ports:
      - "8080:5000"
    volumes:
      - ./site/materials:/app/materials
      - ./site/src/static/images:/app/src/static/images
    environment:
      - FLASK_ENV=production
    restart: unless-stopped

  # For development with hot reload
  wedding-site-dev:
    build: ./site
    container_name: wedding-site-dev
    ports:
      - "5001:5000"
    volumes:
      - ./site:/app
    environment:
      - FLASK_ENV=development
      - FLASK_DEBUG=1
    command: python src/app.py
    profiles:
      - dev
